# Flibrowser 2

Ржавый крюк для вытаскивания книг из в оффлайновых библиотек.

## ЧТО УМЕЕТ

Искать книги в своей БД (содержимое БД импортируется из MyHomeLib-совместимого
индексного файла в формате INPX), вытаскивать выбранные книги из архивов
библиотеки и, при необходимости, паковать в отдельные зиповские архивы
(одна книга - один архив) для читалок, умеющих жрать упакованные книги.

В данной версии (и, вероятно, навсегда) умеет импортировать только
библиотеки вида "куча зиповских архивов с книгами и индексный файл
в формате INPX".

В первую очередь предназначено для работы под Linux.

Работа под Windows обеспечивается только в виде "хоть как-то",
инсталлятора "поставить всё кучей" нет и не будет.

Работа под чем-то еще (MacOS X, *BSD, экзотические *nix'ы и т.п.)
теоретически возможна (при наличии в целевой ОС всего, перечисленного
в разделе "Что хочет"), но не проверялась, и в обозримом будущем автор
не намерен напрягаться ради этого.


## ЧТО ХОЧЕТ

1. Любой дистрибутив Linux с любым графическим окружением рабочего стола
   (лишь бы там имелось нижеперечисленное)
   или MS Windows XP/Vista/...
2. Python 3.3 или новее.
3. GTK+ 3.18 или новее.
4. PythonGObject/PyGI


## КАК УСТАНАВЛИВАТЬ

Сама программа установки не требует. Достаточно положить в отдельный каталог.

Установки хотят компоненты из п.п.2-4 раздела "Что хочет":

#### Под Linux

Всё указанное устанавливается из репозиториев штатными средствами ОС.

#### Под Windows

Всё сложнее:

1. С http://python.org берется установщик Python 3.4.x (т.к. на момент написания
   этого README Python версии 3.5 и новее не поддерживаются виндовым
   портом PyGObject)
2. PyGObject (с GTK 3.x в комплекте) ищется по ссылкам здесь:
   http://pygobject.readthedocs.io/en/latest/guide/faq.html
   где должен найтись установщик pygi-aio-3.*.exe версии 3.18 или новее.
   В нем при установке нужно указать установленную версию питона,
   выбрать в списках пакетов GDK-Pixbuf, GTK 3.x и Pango.
   Остальное (вроде бы) не требуется.
3. И, напоминаю, инсталлятора, который будет сам выполнять п.п.1..3 - нет и НЕ БУДЕТ.

#### Первый запуск после установки

При первом запуске (или после удаления БД настроек) программа вываливает окно
первоначальной настройки, и, в случае успешной настройки, пытается
импортировать индексный файл библиотеки.

## КАК ЗАПУСКАТЬ

### Под Linux

- просто запустить команду "python3 [каталог-куда-положено/]flibrowser2", или
- средствами DE создать ярлык или кнопку запуска с указанной выше командой

### Под Windows

- Win+R, оттуда запустить команду "[каталог-куда-положено\]pythonw flibrowser2", или
- создать ярлык с соотв. командой

## ПОИСК/ВЫБОР КНИГ

1. Выбрать режим "по авторам" или "по циклам" радиокнопками вверху
   левой панели.
2. Выбрать первую букву имени автора или названия цикла в алфавитном
   списке.
3. Выбрать автора или название цикла в следующем списке.
   Можно сократить список, введя несколько начальных букв имени или
   названия в поле ввода под списком.
4. В списке книг выбрать нужные книги. Список можно сократить, введя
   строку для поиска в поле ввода под списком.
   В отличие от списка авторов, строка ищется в полях "название книги"
   и "название серии/цикла" в любой позиции поля (не только в начале).

## ИЗВЛЕЧЕНИЕ КНИГ ИЗ АРХИВОВ БИБЛИОТЕКИ

В нижней панели выбирается (при необходимости) нужный каталог, после чего
следует нажать кнопку "Извлечь".

Также можно выбрать режим именования файлов и указать, сжимать ли файлы.

При нажатии кнопки "Извлечь" файлы извлекаются из библиотеки в указанный
каталог, и, если это указано, пакуются в отдельные архивы ZIP
(один архив на одну книгу).

Внимание! Если выбран режим именования файлов "Имя автора/...", программа
создаст подкаталоги с именами авторов.

## ФАЙЛЫ НАСТРОЕК И БД:

### БД настроек (settings.sqlite3). Очередность поиска:

1. Каталог настроек (если он существует):
   - под Linux: ~/.config/flibrowser2/
   - под Windows: %APPDATA%\flibrowser2\
2. Каталог, где расположен flibrowser.py

Если БД настроек не существует, то программа создаёт новую, сохранив её
файл в каталоге п.1.

БД библиотеки (library.sqlite3) создаётся автоматически при первом импорте
библиотеки в каталоге:

- под Linux: ~/.local/share/flibrowser2/
- под Windows: %APPDATA%\flibrowser2\

Индексный файл INPX и архивы с книгами. Их расположение указывается при
первом запуске или повторной настройке программы.
